services:
    calibre:
        image: linuxserver/calibre-web:latest
        container_name: calibre
        environment:
            - PUID=1000
            - PGID=1000
            - TZ=America/Los_Angeles
            - DOCKER_MODS=linuxserver/mods:universal-calibre
            - OAUTHLIB_RELAX_TOKEN_SCOPE=1
        volumes:
            - config:/config
            - /mnt/media/books:/books
        restart: unless-stopped
        labels:
            traefik.enable: true
            traefik.http.routers.calibre.rule: Host(`calibre.notclickable.com`)
            traefik.http.routers.calibre.middlewares: tinyauth
            traefik.http.routers.calibre.tls.certresolver: cloudflare
            traefik.http.services.calibre.loadbalancer.server.port: 8083

volumes:
    config:
