services:
    tinyauth:
        image: ghcr.io/steveiliop56/tinyauth:v3
        container_name: tinyauth
        restart: unless-stopped
        env_file:
            - .env
        labels:
            traefik.enable: true
            traefik.http.routers.tinyauth.rule: Host(`tinyauth.notclickable.com`)
            traefik.http.routers.tinyauth.tls.certresolver: cloudflare
            traefik.http.middlewares.tinyauth.forwardauth.address: "http://tinyauth:3000"
            traefik.http.middlewares.tinyauth.forwardauth.trustForwardHeader: true
            traefik.http.middlewares.tinyauth.forwardauth.authResponseHeaders: remote-user remote-email remote-name
            traefik.http.routers.tinyauth.entrypoints: websecure
        networks:
            - proxy
networks:
    proxy:
        external: true
