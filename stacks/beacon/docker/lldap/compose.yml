services:
    lldap:
        image: lldap/lldap:stable
        container_name: lldap
        restart: unless-stopped
        ports:
            - 4201:3890
        volumes:
            - lldap_data:/data
        env_file:
            - .env
        labels:
            traefik.enable: true
            traefik.http.routers.lldap.rule: Host(`ldap.notclickable.com`)
            traefik.http.routers.lldap.tls.certresolver: cloudflare
            traefik.http.services.lldap.loadbalancer.server.port: 17170
            traefik.http.routers.lldap.entrypoints: websecure
        networks:
            - proxy

volumes:
    lldap_data:
        driver: local

networks:
    proxy:
        external: true
